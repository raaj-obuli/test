<html>
<body>
<pre id="result">Connecting...</pre>
<script type="text/javascript" src="//code.jquery.com/jquery-git.js"></script>
<script type="text/javascript">
!function(n){function e(n){void 0!==a?a.send('{"tc":"'+n+'", "op":"S", "sid":"'+i+'"}'):u.push(n)}function o(){for(var n=0;n<u.length;n++)e(u[n])}function t(){d?n.ajax("http://fastcast.espn.com/public/rotationip").done(function(n){if(void 0!==n){var e=n.indexOf(",");if(e>0){var o=n.substring(0,e),t=n.substring(e+1);s("",null,o,t)}}}).fail(function(){s("")}):s("")}function s(e,s,u,d){function r(e){if(e)if(console.log(e),"open"==e.type)a.send('{"op":"C"}'),f=!1;else if("close"==e.type)p.append("\n CCLOSED: "+e.code),c=!1,t();else if(e.data)try{var s=JSON.parse(e.data);!c&&"C"==s.op&&200==s.rc&&s.sid?(i=s.sid,o(),c=!0):s.useCDN?(p.append("\n"+s.pl),n.ajax(s.pl).always(function(n,e,o){console.log(n,e,o),n.status&&p.append("\n C err:"+n.status)})):p.append("$upd:"+e.data)}catch(e){}}if("undefined"!=typeof WebSocket){var l=void 0!==u?u:"stg.fastcast.go.com",v="/FastcastService/pubsub/profiles/12000";p.append(":::"+l.split(".").join("")),c=!1,a=new WebSocket("wss://"+l+v),a.onmessage=r,a.onclose=r,a.onerror=r,a.onopen=r}}var a,i,p=n("#result"),c=!1,f=!1,u=["event-topevents"],d=!1;c||f||(t(),f=!0)}(jQuery);
</script>
<body>
</html>
